<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.liv.api.auth.dao.UserMapper">
    <select id="findPermissionAndResources" resultType="com.liv.api.auth.domainmodel.PermissionDO">
    select
        a.permission_id as permissionId,
        permission,resource_id as resourceId,
        menu_id as menuId,
        menu_name as menuName,
        parent_id as parentId,
        description,
        m_url as mUrl
    from
        auth.PERMISSION_RESOURCE a,auth.MENU b,auth.USER_PERMISSION c
    where
        a.resource_id=b.MENU_ID and a.permission_id = c.permission_id and c.user_id=#{userId}
    </select>
</mapper>